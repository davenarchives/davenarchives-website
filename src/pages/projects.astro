---
import type { ImageMetadata } from "astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import BackToTop from "../components/BackToTop.astro";
import pptxGeneratorImage from "../assets/project-card/pptxgenerator.png";
import pdFlashgenImage from "../assets/project-card/pdflashgen.png";
import happyBirdImage from "../assets/project-card/happybird.png";
import ticTacToeImage from "../assets/project-card/tictactoe.png";
import chattRoomImage from "../assets/project-card/chatroom.png";
import draftedImage from "../assets/project-card/drafted.png";
import liveAgeClockImage from "../assets/project-card/liveageclock.png";
import imgBackgroundRemoverImage from "../assets/project-card/imgbgremover.png";
import devCheatSheetsImage from "../assets/project-card/devcheatsheets.png";
import "../styles/landing.css";
import "../styles/projects.css";

type FeaturedProject = {
  id: string;
  type: "featured";
  title: string;
  description: string;
  image: ImageMetadata;
  tags: string[];
};

type PlaceholderProject = {
  id: string;
  type: "placeholder";
};

type Project = FeaturedProject | PlaceholderProject;

const placeholderCount = 3;

const featuredProjects: FeaturedProject[] = [
  {
    id: "pptx-generator",
    type: "featured",
    title: "PPTX GENERATOR",
    description:
      "Full-stack React + FastAPI app that turns any topic into an AI-generated PPTX deck with Gemini.",
    image: pptxGeneratorImage,
    tags: ["react", "fastapi", "gemini", "python", "unsplash"],
  },
  {
    id: "pdflashgen",
    type: "featured",
    title: "PDFLASHGEN",
    description:
      "Transforms uploaded PDFs/TXTs lecture notes into Q and A flashcards with Gemini AI.",
    image: pdFlashgenImage,
    tags: ["nextjs", "react", "fastapi", "python", "gemini", "pypdf2"],
  },
  {
    id: "happy-bird",
    type: "featured",
    title: "HAPPY BIRD",
    description:
      "Happy Bird is a static web remake of Flappy Bird that runs entirely in vanilla HTML/CSS/JS.",
    image: happyBirdImage,
    tags: ["html", "css", "javascript"],
  },
  {
    id: "tictactoe",
    type: "featured",
    title: "TIC TAC TOE",
    description:
      "A full-stack application that matches players in a live lobby with multi-round modes to choose from.",
    image: ticTacToeImage,
    tags: ["nodejs", "express", "socketio", "html", "css", "javascript"],
  },
  {
    id: "chattroom",
    type: "featured",
    title: "CHATTROOM",
    description:
      "Real-time group chat app using React + Firebase with Google sign-in, and profanity filtering.",
    image: chattRoomImage,
    tags: ["react", "firebase", "jest"],
  },
  {
    id: "devcheatsheets",
    type: "featured",
    title: "DEVCHEATSHEETS",
    description:
      "A collection of cheatsheets for programming languages and dev tools.",
    image: devCheatSheetsImage,
    tags: ["html", "css", "javascript"],
  },
  {
    id: "drafted",
    type: "featured",
    title: "DRAFTED",
    description:
      "Anonymous message-sharing web app embedded with Spotify music link.",
    image: draftedImage,
    tags: ["php", "mysql", "html", "css", "javascript"],
  },
  {
    id: "live-age-clock",
    type: "featured",
    title: "LIVE AGE CLOCK",
    description:
      "A web tool that calculates and continuously displays a person's age based on their birthdate.",
    image: liveAgeClockImage,
    tags: ["html", "css", "javascript"],
  },
  {
    id: "img-background-remover",
    type: "featured",
    title: "IMG BG REMOVER",
    description:
      "A single-page web application that removes image backgrounds using the remove.bg REST API.",
    image: imgBackgroundRemoverImage,
    tags: ["html", "css", "javascript"],
  },
];

const placeholderProjects: PlaceholderProject[] = Array.from(
  { length: placeholderCount },
  (_, index) => ({
    id: `placeholder-${index + 1}`,
    type: "placeholder",
  })
);

const projects: Project[] = [...featuredProjects, ...placeholderProjects];
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>projects | davenarchives</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Lilita+One&family=Montserrat:wght@400;500;600;700;800&family=Palanquin+Dark:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
  </head>
  <body>
    <div class="page projects-page">
      <Header active="projects" />
      <main class="projects-content">
        <header class="projects-header">
          <h1>PROJECTS</h1>
          <p>projects I developed or worked on with others</p>
        </header>
        <section class="projects-grid" aria-label="Project list">
          {projects.map((project, index) => {
            if (project.type === "featured") {
              const imageMeta = project.image;

              return (
                <article
                  class="project-card project-card--featured"
                  aria-labelledby={`${project.id}-title`}
                >
                  <div class="project-card__media" role="presentation">
                    <img
                      src={imageMeta.src}
                      alt={`${project.title} project preview`}
                      loading="lazy"
                      width={imageMeta.width ?? 1024}
                      height={imageMeta.height ?? 768}
                    />
                  </div>
                  <div class="project-card__body">
                    <h2 id={`${project.id}-title`}>{project.title}</h2>
                    <p>{project.description}</p>
                    <ul class="project-card__tags" aria-label="Technology tags">
                      {project.tags.map((tag) => (
                        <li>
                          <span>#{tag}</span>
                        </li>
                      ))}
                    </ul>
                  </div>
                </article>
              );
            }

            return (
              <article
                class="project-card project-card--placeholder"
                aria-label={`Project placeholder ${index + 1}`}
              ></article>
            );
          })}
        </section>
      </main>
      <Footer />
      <BackToTop />
    </div>
  </body>
</html>
